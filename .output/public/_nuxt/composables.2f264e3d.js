import{Y as $,Z as b,$ as l,a0 as j,a1 as z,a2 as x,a3 as M,e as S,S as W}from"./entry.4f396710.js";async function P(t,e){return await R(e).catch(i=>(console.error("Failed to get image meta for "+e,i+""),{width:0,height:0,ratio:0}))}async function R(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,r)=>{const i=new Image;i.onload=()=>{const s={width:i.width,height:i.height,ratio:i.width/i.height};e(s)},i.onerror=s=>r(s),i.src=t})}function _(t){return e=>e?t[e]||e:t.missingValue}function E({formatter:t,keyMap:e,joinWith:r="/",valueMap:i}={}){t||(t=(o,n)=>`${o}=${n}`),e&&typeof e!="function"&&(e=_(e));const s=i||{};return Object.keys(s).forEach(o=>{typeof s[o]!="function"&&(s[o]=_(s[o]))}),(o={})=>Object.entries(o).filter(([c,f])=>typeof f<"u").map(([c,f])=>{const h=s[c];return typeof h=="function"&&(f=h(o[c])),c=typeof e=="function"?e(c):c,t(c,f)}).join(r)}function u(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return parseInt(t,10)}function O(t){const e={options:t},r=(s,o={})=>I(e,s,o),i=(s,o={},n={})=>r(s,{...n,modifiers:z(o,n.modifiers||{})}).url;for(const s in t.presets)i[s]=(o,n,c)=>i(o,n,{...t.presets[s],...c});return i.options=t,i.getImage=r,i.getMeta=(s,o)=>U(e,s,o),i.getSizes=(s,o)=>T(e,s,o),e.$img=i,i}async function U(t,e,r){const i=I(t,e,{...r});return typeof i.getMeta=="function"?await i.getMeta():await P(t,i.url)}function I(t,e,r){var h,p;if(typeof e!="string"||e==="")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(e.startsWith("data:"))return{url:e};const{provider:i,defaults:s}=A(t,r.provider||t.options.provider),o=L(t,r.preset);if(e=$(e)?e:b(e),!i.supportsAlias)for(const a in t.options.alias)e.startsWith(a)&&(e=l(t.options.alias[a],e.substr(a.length)));if(i.validateDomains&&$(e)){const a=j(e).host;if(!t.options.domains.find(d=>d===a))return{url:e}}const n=z(r,o,s);n.modifiers={...n.modifiers};const c=n.modifiers.format;(h=n.modifiers)!=null&&h.width&&(n.modifiers.width=u(n.modifiers.width)),(p=n.modifiers)!=null&&p.height&&(n.modifiers.height=u(n.modifiers.height));const f=i.getImage(e,n,t);return f.format=f.format||c||"",f}function A(t,e){const r=t.options.providers[e];if(!r)throw new Error("Unknown provider: "+e);return r}function L(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function T(t,e,r){var h,p;const i=u((h=r.modifiers)==null?void 0:h.width),s=u((p=r.modifiers)==null?void 0:p.height),o=i&&s?s/i:0,n=[],c={};if(typeof r.sizes=="string")for(const a of r.sizes.split(/[\s,]+/).filter(d=>d)){const d=a.split(":");d.length===2&&(c[d[0].trim()]=d[1].trim())}else Object.assign(c,r.sizes);for(const a in c){const d=t.options.screens&&t.options.screens[a]||parseInt(a);let g=String(c[a]);const w=g.endsWith("vw");if(!w&&/^\d+$/.test(g)&&(g=g+"px"),!w&&!g.endsWith("px"))continue;let m=parseInt(g);if(!d||!m)continue;w&&(m=Math.round(m/100*d));const v=o?Math.round(m*o):s;n.push({width:m,size:g,screenMaxWidth:d,media:`(max-width: ${d}px)`,src:t.$img(e,{...r.modifiers,width:m,height:v},r)})}n.sort((a,d)=>a.screenMaxWidth-d.screenMaxWidth);const f=n[n.length-1];return f&&(f.media=""),{sizes:n.map(a=>`${a.media?a.media+" ":""}${a.size}`).join(", "),srcset:n.map(a=>`${a.src} ${a.width}w`).join(", "),src:f==null?void 0:f.src}}const F=E({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(t,e)=>x(t)+"_"+x(e)}),N=(t,{modifiers:e={},baseURL:r}={},i)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const s=F(e)||"_";return r||(r=l(i.options.nuxt.baseURL,"/_ipx")),{url:l(r,s,M(t))}},q=!0,C=!0,D=Object.freeze(Object.defineProperty({__proto__:null,getImage:N,supportsAlias:C,validateDomains:q},Symbol.toStringTag,{value:"Module"})),y={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipx",domains:[],alias:{}};y.providers={ipx:{provider:D,defaults:void 0}};const H=()=>{const t=S(),e=W();return e.$img||e._img||(e._img=O({...y,nuxt:{baseURL:t.app.baseURL}}))};export{u as p,H as u};
