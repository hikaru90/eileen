import{_ as F}from"./B4ykcIyl.js";import{_ as S}from"./BgVKTi7K.js";import{f as D,r as E,o as s,c as a,a as t,b,w as U,t as x,S as $,n as u,F as i,x as q,z as g,d as f,A as y,E as w,v,p as R,e as T,T as M}from"./k1IzlGhG.js";import{u as j}from"./NQ833bWe.js";import{d as B}from"./F1WjrixK.js";import{_ as z}from"./DlAUqK2U.js";import"./BH53taJr.js";import"./zu2oJgjb.js";const d=r=>(R("data-v-75e8c12c"),r=r(),T(),r),O={class:"mb-28"},L={class:"max-container"},P={class:"flex items-center justify-center"},A={class:"shiny-pop text-salmon font-heading text-lg sm:text-xl md:text-3xl lg:text-4xl mb-16 text-center"},J={class:"flex flex-col lg:flex-row gap-16"},G={class:"-ml-[3%] -mr-[5%] lg:mx-auto w-auto lg:w-2/3"},H={class:"bg-white shadow-2xl shadow-coffee/20 py-5 px-10"},K={key:0,class:"flex flex-wrap -mx-3"},Q=["for"],W=["id","onUpdate:modelValue"],X=["id","onUpdate:modelValue"],Y={key:2,class:"mt-1 rounded text-red bg-lightRed/60 px-2 py-[2px] text-sm"},Z=d(()=>t("div",{class:""},"Nachricht senden",-1)),ee=[Z],te={key:1,class:"h-60 flex flex-col items-start justify-center"},se={key:0,class:"animate-spin"},ae=d(()=>t("div",{class:"font-heading text-2xl mb-2"},"Vielen Dank!",-1)),oe=d(()=>t("p",{class:"max-w-[24em]"}," Deine Nachricht ist bei mir eingegangen. Ich melde mich sobald wie möglich bei Dir. ",-1)),le=d(()=>t("div",{class:"font-heading text-2xl mb-2 text-red"},"Oh!",-1)),ne=d(()=>t("p",{class:"max-w-[24em]"},[f(" Bei dem Versand Deiner Nachricht ist ein Fehler aufgetreten. Versuche es bitte erneut. Falls der Fehler bestehen bleibt, sende mir bitte eine E-Mail an "),t("a",{href:"mailto:kontakt@eileengeorge.de",class:"underline"},"kontakt@eileengeorge.de"),f(". ")],-1)),re=D({__name:"Contact",props:{component:{default:{content:B.find(r=>r.type==="contact").content}}},setup(r){const k=M(),c=r,o=E({form:[{name:"firstName",validation:"required",label:"Vorname",type:"text",value:"",class:"w-full lg:w-1/2",error:""},{name:"lastName",validation:"required",label:"Nachname",type:"text",value:"",class:"w-full lg:w-1/2",error:""},{name:"mail",validation:"required",label:"E-Mail",type:"text",value:"",class:"w-full lg:w-1/2",error:""},{name:"phone",validation:"",label:"Telefonnummer",type:"text",value:"",class:"w-full lg:w-1/2",error:""},{name:"message",validation:"required",label:"Nachricht",type:"textarea",value:"",class:"w-full",error:""}],pending:!1,submitted:!1,success:!1}),V=n=>j()(`${k.public.SERVER_URL}/api/files/${c.component.collectionName}/${c.component.id}/${n}`,{format:"webp"}),p=()=>{let n=[];for(let l of o.form)l.validation==="required"&&(l.value?l.error="":(l.error="Fülle bitte dieses Feld aus.",n.push(1)));return!(n.length>0)},I=()=>{let n={};return o.form.forEach(l=>{n[l.name]=l.value}),n},N=async()=>{var n;o.pending=!0;try{if(!p())return;const h=await fetch("/api/mail/sendMail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:"contactForm",recipient:(n=c.component.content)==null?void 0:n.recipient,formData:I()})});o.pending=!1,o.submitted=!0,o.success=!0}catch(l){console.log("error sending contact form",l),o.pending=!1,o.submitted=!0,o.success=!1}};return(n,l)=>{const h=F,C=S;return s(),a("div",O,[t("div",L,[t("div",P,[b(h,null,{default:U(()=>{var e;return[t("h2",A,x((e=c.component.content)==null?void 0:e.heading),1)]}),_:1})]),t("div",J,[t("div",{style:$([{backgroundImage:`url(${V(c.component.content.image)})`}]),class:"flex-grow bg-cover shadow-2xl shadow-coffee/20 w-full h-60 lg:h-auto lg:w-1/3 rounded"},null,4),t("div",G,[t("div",H,[u(o).submitted?(s(),a("div",te,[u(o).pending?(s(),a("div",se,[b(C,{name:"icon-pending",class:"text-4xl text-black animate-spin"})])):(s(),a(i,{key:1},[u(o).success?(s(),a(i,{key:0},[ae,oe],64)):(s(),a(i,{key:1},[le,ne],64))],64))])):(s(),a("div",K,[(s(!0),a(i,null,q(u(o).form,(e,m)=>(s(),a("div",{key:"formElement"+m,class:g([[e.class],"px-2 mt-3"])},[t("label",{for:"input"+m,class:"text-sm block ml-1"},[f(x(e.label)+" ",1),e.validation==="required"?(s(),a(i,{key:0},[],64)):(s(),a(i,{key:1},[f(" (optional) ")],64))],8,Q),e.type==="text"?y((s(),a("input",{key:0,id:"input"+m,type:"text","onUpdate:modelValue":_=>e.value=_,onInput:p,class:g([[e.error.length?"border !border-red":""],"input-class"])},null,42,W)),[[w,e.value]]):v("",!0),e.type==="textarea"?y((s(),a("textarea",{key:1,id:"input"+m,"onUpdate:modelValue":_=>e.value=_,onInput:p,class:g(["input-class min-h-[200px]",[e.error?"border !border-red":""]])},null,42,X)),[[w,e.value]]):v("",!0),e.error?(s(),a("div",Y,x(e.error),1)):v("",!0)],2))),128)),t("div",{class:"flex justify-end w-full mr-3 mt-3"},[t("button",{onClick:N,class:"bg-salmon rounded-full text-white flex items-center px-5 py-2 shadow-md shadow-coffee/10"},ee)])]))])])])])])}}}),_e=z(re,[["__scopeId","data-v-75e8c12c"]]);export{_e as default};
